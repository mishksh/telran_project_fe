{"ast":null,"code":"const LOAD_PRODUCTS = '[PRODUCTS_CONTAINER] LOAD_PRODUCTS';\nconst LOAD_ALL_SALES_PRODUCTS = '[SALES_CONTAINER] LOAD_ALL_SALES_PRODUCTS';\nconst FILTER_PRODUCTS_BY_PRICE = '[SORT_FORM_BY_SELECT] FILTER_PRODUCTS_BY_PRICE';\nconst SORT_PRODUCTS = '[SORT_FORM_BY_PRICE] SORT_PRODUCTS';\nconst TOGGLE_DISCOUNT = '[SORT_FORM_BY_CHECKBOX] TOGGLE_DISCOUNT';\nexport const loadAllProductsAction = payload => ({\n  type: LOAD_PRODUCTS,\n  payload\n});\nexport const loadAllSalesProductsAction = payload => ({\n  type: LOAD_ALL_SALES_PRODUCTS,\n  payload\n});\nexport const filterProductByPriceAction = payload => ({\n  type: FILTER_PRODUCTS_BY_PRICE,\n  payload\n});\nexport const sortProductsAction = payload => ({\n  type: SORT_PRODUCTS,\n  payload\n});\nexport const filterProductsByCheckbox = payload => ({\n  type: TOGGLE_DISCOUNT,\n  payload\n});\nlet default_state = [];\nexport const productReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  if (action.type === LOAD_PRODUCTS) {\n    default_state = action.payload.map(el => ({\n      ...el,\n      hide_price: false\n    }));\n    return action.payload.map(el => ({\n      ...el,\n      hide_price: false\n    }));\n  } else if (action.type === LOAD_ALL_SALES_PRODUCTS) {\n    return action.payload.filter(el => el.discont_price > 0);\n  } else if (action.type === FILTER_PRODUCTS_BY_PRICE) {\n    const {\n      min_value,\n      max_value\n    } = action.payload;\n    return state.map(el => {\n      const new_price = el.discont_price ? el.discont_price : el.price;\n      if (new_price >= min_value && el.price <= max_value) {\n        el.hide_price = false;\n      } else {\n        el.hide_price = true;\n      }\n      return el;\n    });\n  } else if (action.type === SORT_PRODUCTS) {\n    if (action.payload === 'title') {\n      state.sort((a, b) => a[action.payload].localeCompare(b[action.payload]));\n    } else if (action.payload === 'price_asc') {\n      state.sort((a, b) => a[action.payload] - b[action.payload]);\n    } else if (action.payload === 'title_desc') {\n      state.sort((a, b) => b['title_asc'].localeCompare(a['title']));\n    } else if (action.payload === 'price_desc') {\n      state.sort((a, b) => {\n        const newPriceA = a['discont_price'] || a['price_asc'];\n        const newPriceB = b['discont_price'] || b['price_desc'];\n        return newPriceB - newPriceA;\n      });\n    } else if (action.payload === 'default') {\n      return [...default_state];\n    }\n    return [...state];\n  } else if (action.type === TOGGLE_DISCOUNT) {\n    if (action.payload) {\n      return state.map(el => {\n        if (el.discont_price) {\n          return {\n            ...el,\n            hide_sale: true\n          };\n        } else {\n          return {\n            ...el,\n            hide_sale: false\n          };\n        }\n      });\n    } else {\n      return state.map(el => {\n        return {\n          ...el,\n          hide_sale: true\n        };\n      });\n    }\n  } else {\n    return state;\n  }\n};","map":{"version":3,"names":["LOAD_PRODUCTS","LOAD_ALL_SALES_PRODUCTS","FILTER_PRODUCTS_BY_PRICE","SORT_PRODUCTS","TOGGLE_DISCOUNT","loadAllProductsAction","payload","type","loadAllSalesProductsAction","filterProductByPriceAction","sortProductsAction","filterProductsByCheckbox","default_state","productReducer","state","arguments","length","undefined","action","map","el","hide_price","filter","discont_price","min_value","max_value","new_price","price","sort","a","b","localeCompare","newPriceA","newPriceB","hide_sale"],"sources":["D:/Users/Mike/Dekstop/FE_Tel-ran/JS_41-42/telran_project/client/src/store/reducers/productReducer.js"],"sourcesContent":["const LOAD_PRODUCTS = '[PRODUCTS_CONTAINER] LOAD_PRODUCTS';\nconst LOAD_ALL_SALES_PRODUCTS = '[SALES_CONTAINER] LOAD_ALL_SALES_PRODUCTS'\nconst FILTER_PRODUCTS_BY_PRICE = '[SORT_FORM_BY_SELECT] FILTER_PRODUCTS_BY_PRICE';\nconst SORT_PRODUCTS = '[SORT_FORM_BY_PRICE] SORT_PRODUCTS';\nconst TOGGLE_DISCOUNT = '[SORT_FORM_BY_CHECKBOX] TOGGLE_DISCOUNT'\n\n\nexport const loadAllProductsAction = payload => ({ type: LOAD_PRODUCTS, payload });\nexport const loadAllSalesProductsAction = payload => ({ type: LOAD_ALL_SALES_PRODUCTS, payload });\nexport const filterProductByPriceAction = payload => ({ type: FILTER_PRODUCTS_BY_PRICE, payload });\nexport const sortProductsAction = payload => ({ type: SORT_PRODUCTS, payload });\nexport const filterProductsByCheckbox = payload => ({ type: TOGGLE_DISCOUNT, payload });\n\nlet default_state = []\n\nexport const productReducer = (state = [], action) => {\n    if (action.type === LOAD_PRODUCTS) {\n        default_state = action.payload.map(el => ({...el, hide_price:false}))\n        return action.payload.map(el => ({...el, hide_price:false}))\n    }\n    else if (action.type === LOAD_ALL_SALES_PRODUCTS) {\n        return action.payload.filter(el => el.discont_price > 0);\n    }\n    else if (action.type === FILTER_PRODUCTS_BY_PRICE) {\n        const { min_value, max_value } = action.payload;\n        return state.map(el => {\n            const new_price = el.discont_price ? el.discont_price : el.price;\n            if (new_price >= min_value && el.price <= max_value) {\n                el.hide_price = false\n            } else {\n                el.hide_price = true\n            }\n            return el\n        })\n    }\n    else if (action.type === SORT_PRODUCTS) {\n        if (action.payload === 'title') {\n            state.sort((a, b) => a[action.payload].localeCompare(b[action.payload]));\n        } else if (action.payload === 'price_asc') {\n            state.sort((a, b) => a[action.payload] - b[action.payload]);\n        } else if (action.payload === 'title_desc') {\n            state.sort((a, b) => b['title_asc'].localeCompare(a['title']));\n        } else if (action.payload === 'price_desc') {\n            state.sort((a, b) => {\n                const newPriceA = a['discont_price'] || a['price_asc'];\n                const newPriceB = b['discont_price'] || b['price_desc'];\n                return newPriceB - newPriceA;\n            });\n        }\n        else if (action.payload === 'default') {\n\n            return [...default_state]\n        }\n        return [...state];\n    }\n    else if (action.type === TOGGLE_DISCOUNT) {\n        if (action.payload) {\n            return state.map(el => {\n                if (el.discont_price) {\n                    return {\n                        ...el,\n                        hide_sale: true\n                    };\n                } else {\n                    return {\n                        ...el,\n                        hide_sale: false\n                    };\n                }\n            });\n        } else {\n            return state.map(el => {\n                return {\n                    ...el,\n                    hide_sale: true\n                };\n            });\n        }\n    }\n    else {return state}\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}