{"ast":null,"code":"const LOAD_CATEGORY = 'LOAD_CATEGORY';\nconst FILTER_PRODUCTS_BY_PRICE_CATEGORY = '[SORT_FORM_BY_SELECT_CATEGORY] FILTER_PRODUCTS_BY_PRICE_CATEGORY';\nconst SORT_PRODUCTS_CATEGORY = '[SORT_FORM_BY_PRICE_CATEGORY] SORT_PRODUCTS_CATEGORY';\nconst TOGGLE_DISCOUNT_CATEGORY = '[SORT_FORM_BY_CHECKBOX_CATEGORY] TOGGLE_DISCOUNT_CATEGORY';\nexport const loadSingleCategoryAction = payload => ({\n  type: LOAD_CATEGORY,\n  payload\n});\nexport const filterProductByPriceCategoryAction = payload => ({\n  type: FILTER_PRODUCTS_BY_PRICE_CATEGORY,\n  payload\n});\nexport const sortProductsCategoryAction = payload => ({\n  type: SORT_PRODUCTS_CATEGORY,\n  payload\n});\nexport const filterProductsCategoryByCheckbox = payload => ({\n  type: TOGGLE_DISCOUNT_CATEGORY,\n  payload\n});\nlet default_state = [];\nexport const singleCategoryReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  if (action.type === LOAD_CATEGORY) {\n    default_state = action.payload.map(el => ({\n      ...el,\n      hide_price: false\n    }));\n    return action.payload.map(el => ({\n      ...el,\n      hide_price: false\n    }));\n  } else if (action.type === SORT_PRODUCTS_CATEGORY) {\n    if (action.payload === 'default') {\n      return [...default_state];\n    } else if (action.payload === 'title') {\n      state.sort((a, b) => a[action.payload].localeCompare(b[action.payload]));\n    } else if (action.payload === 'price') {\n      state.sort((a, b) => a[action.payload] - b[action.payload]);\n    } else if (action.payload === 'titleZ') {\n      state.sort((a, b) => b['title'].localeCompare(a['title']));\n    } else if (action.payload === 'priceLess') {\n      state.sort((a, b) => {\n        const newPriceA = a['discount_price'] || a['price'];\n        const newPriceB = b['discount_price'] || b['price'];\n        return newPriceB - newPriceA;\n      });\n    }\n    return [...state];\n  } else if (action.type === FILTER_PRODUCTS_BY_PRICE_CATEGORY) {\n    const {\n      min_value,\n      max_value\n    } = action.payload;\n    return state.map(el => {\n      const new_price = el.discount_price ? el.discount_price : el.price;\n      if (new_price >= min_value && el.price <= max_value) {\n        el.hide_price = false;\n      } else {\n        el.hide_price = true;\n      }\n      return el;\n    });\n  } else if (action.type === TOGGLE_DISCOUNT_CATEGORY) {\n    if (action.payload) {\n      return state.map(el => {\n        if (el.discount_price) {\n          return {\n            ...el,\n            hide_sale: true\n          };\n        } else {\n          return {\n            ...el,\n            hide_sale: false\n          };\n        }\n      });\n    } else {\n      return state.map(el => {\n        return {\n          ...el,\n          hide_sale: true\n        };\n      });\n    }\n  } else {\n    return state;\n  }\n};","map":{"version":3,"names":["LOAD_CATEGORY","FILTER_PRODUCTS_BY_PRICE_CATEGORY","SORT_PRODUCTS_CATEGORY","TOGGLE_DISCOUNT_CATEGORY","loadSingleCategoryAction","payload","type","filterProductByPriceCategoryAction","sortProductsCategoryAction","filterProductsCategoryByCheckbox","default_state","singleCategoryReducer","state","arguments","length","undefined","action","map","el","hide_price","sort","a","b","localeCompare","newPriceA","newPriceB","min_value","max_value","new_price","discount_price","price","hide_sale"],"sources":["D:/Users/Mike/Dekstop/FE_Tel-ran/JS_41-42/telran_project/client/src/store/reducers/singleCategoryReducer.js"],"sourcesContent":["const LOAD_CATEGORY = 'LOAD_CATEGORY';\nconst FILTER_PRODUCTS_BY_PRICE_CATEGORY = '[SORT_FORM_BY_SELECT_CATEGORY] FILTER_PRODUCTS_BY_PRICE_CATEGORY';\nconst SORT_PRODUCTS_CATEGORY = '[SORT_FORM_BY_PRICE_CATEGORY] SORT_PRODUCTS_CATEGORY';\nconst TOGGLE_DISCOUNT_CATEGORY = '[SORT_FORM_BY_CHECKBOX_CATEGORY] TOGGLE_DISCOUNT_CATEGORY'\n\nexport const loadSingleCategoryAction = payload => ({ type: LOAD_CATEGORY, payload });\nexport const filterProductByPriceCategoryAction = payload => ({ type: FILTER_PRODUCTS_BY_PRICE_CATEGORY, payload });\nexport const sortProductsCategoryAction = payload => ({ type: SORT_PRODUCTS_CATEGORY, payload });\nexport const filterProductsCategoryByCheckbox = payload => ({ type: TOGGLE_DISCOUNT_CATEGORY, payload });\n\n\nlet default_state = []\n\nexport const singleCategoryReducer = (state = [], action) => {\n    if (action.type === LOAD_CATEGORY) {\n        default_state = action.payload.map(el => ({ ...el, hide_price: false }))\n\n        return action.payload.map(el => ({ ...el, hide_price: false }))\n\n    } else if (action.type === SORT_PRODUCTS_CATEGORY) {\n        if (action.payload === 'default') {\n            return [...default_state];\n        }\n        else if (action.payload === 'title') {\n            state.sort((a, b) => a[action.payload].localeCompare(b[action.payload]));\n        } else if (action.payload === 'price') {\n            state.sort((a, b) => a[action.payload] - b[action.payload]);\n        } else if (action.payload === 'titleZ') {\n            state.sort((a, b) => b['title'].localeCompare(a['title']));\n        } else if (action.payload === 'priceLess') {\n            state.sort((a, b) => {\n                const newPriceA = a['discount_price'] || a['price'];\n                const newPriceB = b['discount_price'] || b['price'];\n                return newPriceB - newPriceA;\n            });\n        }\n\n        return [...state];\n    }\n    else if (action.type === FILTER_PRODUCTS_BY_PRICE_CATEGORY) {\n        const { min_value, max_value } = action.payload;\n\n        return state.map(el => {\n            const new_price = el.discount_price ? el.discount_price : el.price;\n            if (new_price >= min_value && el.price <= max_value) {\n                el.hide_price = false\n            } else {\n                el.hide_price = true\n            }\n            return el\n        })\n    }\n\n    else if (action.type === TOGGLE_DISCOUNT_CATEGORY) {\n        if (action.payload) {\n            return state.map(el => {\n                if (el.discount_price) {\n                    return {\n                        ...el,\n                        hide_sale: true\n                    };\n                } else {\n                    return {\n                        ...el,\n                        hide_sale: false\n                    };\n                }\n            });\n        } else {\n            return state.map(el => {\n                return {\n                    ...el,\n                    hide_sale: true\n                };\n            });\n        }\n    }\n    else { return state }\n}\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}